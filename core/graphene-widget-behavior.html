<!--
Copyright (c) 2018, Cyber Dyne SRL. All rights reserved.
This code may only be used under the BSD style license found at https://github.com/cyber-dyne/graphene/License.txt
The complete set of authors may be found at https://github.com/cyber-dyne/graphene/Authors.txt
The complete set of contributors may be found at https://github.com/cyber-dyne/graphene/Contributors.txt
-->
<link rel="import" href="../../polymer/polymer.html"/>
<link rel="import" href="../lib/lodash.html"/>
<link rel="import" href="graphene-datastore-behavior.html"/>
<link rel="import" href="graphene-elementlifecycle-behavior.html"/>
<link rel="import" href="graphene-fn-api.html"/>
<link rel="import" href="graphene-localize-behavior.html"/>
<link rel="import" href="graphene-rest-behavior.html"/>
<link rel="import" href="graphene-store-behavior.html"/>
<link rel="import" href="graphene-widgetlifecycle-behavior.html"/>

<script>
    // <![CDATA[
    ;(function (undefined) {
        'use strict'

        /** @polymerBehavior Graphene.WidgetBehavior */
        Graphene.WidgetBehaviorImpl = {
            observers: [
                // An undefined property must not stop the other from being fired.
                '_fireStepperStepLifecycleChangedEvent(enabled, isAttached)',
                '_fireStepperStepLifecycleChangedEvent(valid, isAttached)',
            ],

            //// Lifecycle callbacks. //////////////////////////////////////

            //// Computers. ////////////////////////////////////////////////

            //// Observers. ////////////////////////////////////////////////

            _fireStepperStepLifecycleChangedEvent(somethingChanged, isAttached) {
                if (! isAttached) {
                    // We must be attached to fire the event.
                    return
                }

                const enabled = this.enabled
                const valid = this.valid
                const eventDetail = { enabled, valid }

                this.fire('graphene-stepper-step-lifecycle-changed', eventDetail)
            },

            //// Listeners. ////////////////////////////////////////////////

            //// Public APIs. //////////////////////////////////////////////

            //// Internal APIs. ////////////////////////////////////////////
        }

        /** @polymerBehavior */
        Graphene.WidgetBehavior = [
            Graphene.DatastoreBehavior,
            Graphene.ElementLifecycleBehavior,
            Graphene.LocalizeBehavior,
            Graphene.RestBehavior,
            Graphene.StoreBehavior,
            Graphene.WidgetBehaviorImpl,
            Graphene.WidgetLifecycleBehavior,
        ]
    })()
    // ]]>
</script>
